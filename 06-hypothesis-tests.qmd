# מבחני השערות {#sec-hypothesis-tests}

בפרק זה נלמד על מבחני השערות פשוטים שניתן להפעיל ב-R. מטבע הדברים, מכיוון ש-R היא שפה סטטיסטית יש ערב רב של מבחני השערות פרמטרים וא-פרמטריים, שבוחנים השערות שונות במצבים שונים, אבל בספר זה נתמקד במבחני ההשערות שיימצאו בקורס מבוא לסטטיסטיקה (ואולי עוד קצת).

מטרת הפרק היא לא לספק את התיאוריה. לצורך השלמות תיאורתיות, אני ממליץ לקרוא את [@walpole1993probability].

מטרת הפרק שלפניכם היא לתת כלים מעשיים לביצוע מבחני השערות, בפרט נדון במקרים הבאים:

-   מבחני השערות על תוחלת

-   מבחני השערות על שונות

-   מבחני השערות על אי-תלות

-   מבחני השערות על התפלגות

## מבחני השערות על תוחלת

אחד מהפרמטרים החשובים של התפלגויות הוא התוחלת. לתוחלת ולממוצע יש קשר הדוק ביניהם - כאשר אנחנו מבצעים דגימה מתוך אוכלוסיה, ממוצע המדגם הוא אמד המייצג את התוחלת.

```{r setup}
#| warning: false
#| message: false
#| include: false

library(palmerpenguins)
library(tidyverse)
```

נדגים זאת בעזרת מדגם הפינגויינים שראינו בפרק הקודם:

```{r penguin means}
penguins %>% 
  filter(!is.na(bill_length_mm)) %>% 
  group_by(species) %>% 
  summarize(avg_length = mean(bill_length_mm),
            sample_size = n())
```

לכל אחד מזני הפינגויינים ממוצע שונה לאורך המקור. לדוגמה, פינגויינים מסוג Adelie הם בעלי מקור באורך ממוצע 38.8 מ"מ. בפועל מדובר בממוצע המחושב על מדגם של 151 תצפיות, וסביר להניח שהתוחלת בכלל אוכלוסית הפינגויים מזן Adelie היא קצת שונה. לדוגמה, תוחלת של 38 מ"מ, יכולה להביא לכך שממוצע על פני דגימה של 151 תצפיות יהיה 38.8 מ"מ.

המטרה של מבחן השערות על התוחלת היא לעזור לנו לקבוע ברמת שגיאה של $\alpha$ (אשר בדרך כלל נקבעת כ-5% שגיאה), *האם התוחלת היא בעלת ערך מסוים* $\mu_0$, *בהינתן תוצאות המדגם* שלנו.

צורת הסתכלות אחרת היא בניית רווח בר סמך לתוחלת, או במילים אחרות, *מה הטווח הסביר שבו נמצאת התוחלת בהינתן תוצאות המדגם*.

בשלב זה נתייחס למדגם אחד, ומיד נכליל את ההסתכלות לשני מדגמים.

### מבחן השערות על מדגם אחד

נשתמש בפקודת `t.test` על מנת לייצר רווח בר סמך לתוחלת אורך המקור של פינגויינים מזן Adelie.

את רווח בר הסמך ברמת ביטחון של 95% (כלומר רמת הוודאות של הדיווח שנקבל היא 95%, או 5% שגיאה).

כמו כן, נבחן האם ייתכן שהתוחלת הינה 38, למרות שהתצפיות במדגם בעלות ממוצע של 38.8.

```{r adelie ttest}
adelie <- penguins %>% 
  filter(species == "Adelie") %>% 
  filter(!is.na(bill_length_mm))

t.test(adelie$bill_length_mm, 
       alternative = "two.sided",
       mu = 38, conf.level = 0.95)
```
